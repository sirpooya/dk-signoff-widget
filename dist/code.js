(() => {
  var __defProp = Object.defineProperty;
  var __defProps = Object.defineProperties;
  var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a, b) => {
    for (var prop in b || (b = {}))
      if (__hasOwnProp.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b)) {
        if (__propIsEnum.call(b, prop))
          __defNormalProp(a, prop, b[prop]);
      }
    return a;
  };
  var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
  var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
  var __export = (target, all) => {
    __markAsModule(target);
    for (var name in all)
      __defProp(target, name, { get: all[name], enumerable: true });
  };

  // src/checklist.json
  var checklist_exports = {};
  __export(checklist_exports, {
    default: () => checklist_default,
    headline: () => headline,
    sections: () => sections
  });
  var headline = "\u0686\u06A9\u200C\u0644\u06CC\u0633\u062A \u0647\u0646\u062F\u0627\u0641";
  var sections = [
    {
      title: "\u06A9\u0627\u0645\u067E\u0648\u0646\u0646\u062A\u200C\u0647\u0627",
      items: [
        "\u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC\u200C\u0647\u0627\u06CC \u062C\u062F\u06CC\u062F \u06A9\u062A\u0627\u0628\u062E\u0627\u0646\u0647 \u062F\u0631\u06CC\u0627\u0641\u062A \u06A9\u0646\u06CC\u062F \u0648 \u0647\u0645\u0647 \u0645\u0648\u0627\u0631\u062F \u0645\u0646\u0642\u0636\u06CC\u200C\u0634\u062F\u0647 \u0628\u0631\u0637\u0631\u0641 \u0634\u062F\u0647 \u0628\u0627\u0634\u062F.",
        "\u062A\u0645\u0627\u0645 \u0631\u0646\u06AF\u200C\u0647\u0627 \u0648 \u0641\u0648\u0627\u0635\u0644 \u0628\u0647 \u062A\u0648\u06A9\u0646\u200C\u0647\u0627 \u0645\u062A\u0635\u0644 \u0628\u0627\u0634\u062F \u0648 \u0628\u0627 \u062A\u063A\u06CC\u06CC\u0631 variable mode \u062A\u0633\u062A \u06A9\u0646\u06CC\u062F.",
        "\u0627\u0632 \u062F\u06CC\u062A\u0686 \u0648 \u0622\u0648\u0631\u0631\u0627\u06CC\u062F \u062E\u0648\u062F\u062F\u0627\u0631\u06CC \u06A9\u0646\u06CC\u062F\u061B \u0647\u0645\u0647 \u0639\u0646\u0627\u0635\u0631 \u0628\u0627\u06CC\u062F \u062F\u0631 \u0627\u0648\u062A\u0644\u0627\u06CC\u0646 \u0645\u062F (Y\u2318) \u0628\u0647\u200C\u0635\u0648\u0631\u062A \u0641\u0631\u06CC\u0645 \u0628\u0646\u0641\u0634 \u062F\u06CC\u062F\u0647 \u0634\u0648\u0646\u062F. \u0641\u0642\u0637 \u062F\u0631 \u0645\u0648\u0627\u0631\u062F\u06CC \u06A9\u0647 \u062F\u0631 \u06AF\u0627\u06CC\u062F\u0644\u0627\u06CC\u0646 \u0630\u06A9\u0631 \u0634\u062F\u0647\u060C \u062F\u06CC\u062A\u0686 \u0645\u062C\u0627\u0632 \u0627\u0633\u062A.",
        "\u0628\u0631\u0627\u06CC \u0647\u0631 \u06A9\u0627\u0631\u0628\u0631\u062F \u0627\u0632 \u06A9\u0627\u0645\u067E\u0648\u0646\u0646\u062A \u062F\u0631\u0633\u062A \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0634\u062F\u0647 \u0628\u0627\u0634\u062F.",
        "\u062A\u0645\u0627\u0645 asset\u0647\u0627 \u0648 \u0627\u0644\u06AF\u0648\u0647\u0627\u06CC \u062A\u06A9\u0631\u0627\u0631\u067E\u0630\u06CC\u0631 \u0631\u0627 \u0628\u0647\u200C\u0635\u0648\u0631\u062A \u06A9\u0627\u0645\u067E\u0648\u0646\u0646\u062A \u0645\u062D\u0644\u06CC \u062A\u0639\u0631\u06CC\u0641 \u06A9\u0646\u06CC\u062F."
      ]
    },
    {
      title: "\u0635\u0641\u062D\u0627\u062A",
      items: [
        "\u062A\u0645\u0627\u0645 \u06A9\u062A\u0627\u0628\u062E\u0627\u0646\u0647\u200C\u0647\u0627\u06CC \u063A\u06CC\u0631\u0636\u0631\u0648\u0631\u06CC \u0631\u0627 \u062D\u0630\u0641 \u06A9\u0646\u06CC\u062F \u0648 \u0641\u0642\u0637 \u06A9\u062A\u0627\u0628\u062E\u0627\u0646\u0647\u200C\u0647\u0627\u06CC \u0633\u06CC\u0633\u062A\u0645 \u0637\u0631\u0627\u062D\u06CC \u0631\u0627 \u0646\u06AF\u0647 \u062F\u0627\u0634\u062A\u0647 \u0634\u0648\u0646\u062F.",
        "\u062F\u0631 \u0641\u0631\u06CC\u0645\u200C\u0647\u0627\u06CC \u0627\u0633\u062A\u0627\u0646\u062F\u0627\u0631\u062F \u0637\u0631\u0627\u062D\u06CC \u06A9\u0646\u06CC\u062F (375\xD7812 \u0628\u0631\u0627\u06CC \u0645\u0648\u0628\u0627\u06CC\u0644\u060C 1440\xD71024 \u0628\u0631\u0627\u06CC \u062F\u0633\u06A9\u062A\u0627\u067E).",
        "\u0648\u0627\u06A9\u0646\u0634\u200C\u06AF\u0631\u0627\u06CC\u06CC \u2014 \u0628\u0631\u0627\u06CC \u0631\u0641\u062A\u0627\u0631 \u0633\u06CC\u0627\u0644 \u0647\u0646\u06AF\u0627\u0645 \u062A\u063A\u06CC\u06CC\u0631 \u0627\u0646\u062F\u0627\u0632\u0647 \u0641\u0631\u06CC\u0645\u060C autolayout \u0648 constraints \u0627\u0639\u0645\u0627\u0644 \u0634\u0648\u062F."
      ]
    },
    {
      title: "\u06A9\u06CC\u0633\u200C\u0647\u0627\u06CC \u062E\u0627\u0635",
      items: [
        "\u0628\u0627\u0632\u06AF\u0634\u062A \u0633\u06CC\u0633\u062A\u0645 \u2014 \u0645\u0633\u06CC\u0631 \u0646\u0627\u0648\u0628\u0631\u06CC \u0628\u0631\u0627\u06CC \u062F\u06A9\u0645\u0647\u200C\u0647\u0627\u06CC \u0628\u0627\u0632\u06AF\u0634\u062A \u0645\u0631\u0648\u0631\u06AF\u0631 \u0648 \u0633\u06CC\u0633\u062A\u0645 \u0639\u0627\u0645\u0644 \u062F\u0631 \u0641\u0644\u0648\u0647\u0627\u06CC \u0686\u0646\u062F\u0644\u0627\u06CC\u0647 (\u0645\u0648\u062F\u0627\u0644 \u0686\u0646\u062F\u0645\u0631\u062D\u0644\u0647\u200C\u0627\u06CC\u060C \u0646\u0648\u0627\u0631 \u0646\u0627\u0648\u0628\u0631\u06CC\u060C \u0633\u0627\u062E\u062A\u0627\u0631 tabular).",
        "\u062D\u0627\u0644\u062A\u200C\u0647\u0627\u06CC \u062E\u0637\u0627 \u2014 \u062E\u0637\u0627\u0647\u0627\u06CC \u0627\u0639\u062A\u0628\u0627\u0631\u0633\u0646\u062C\u06CC\u060C \u0645\u0634\u06A9\u0644\u0627\u062A \u0633\u0631\u0648\u0631\u060C \u0627\u062A\u0645\u0627\u0645 \u0632\u0645\u0627\u0646 \u0634\u0628\u06A9\u0647\u060C \u0647\u0645\u0686\u0646\u06CC\u0646 \u062D\u0627\u0644\u062A \u0622\u0641\u0644\u0627\u06CC\u0646 \u0648 \u0627\u0645\u06A9\u0627\u0646 \u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F.",
        "\u062D\u0627\u0644\u062A \u062E\u0627\u0644\u06CC \u0648 \u0644\u0648\u062F\u06CC\u0646\u06AF \u2014 \u0628\u062F\u0648\u0646 \u062F\u0627\u062F\u0647\u060C \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0628\u0631\u0627\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0628\u0627\u0631.",
        "\u062D\u0627\u0644\u062A\u200C\u0647\u0627\u06CC \u062D\u062F\u0627\u06A9\u062B\u0631\u06CC \u2014 \u0633\u0631\u0631\u06CC\u0632 \u0634\u062F\u0646 \u0645\u062A\u0646\u200C\u0647\u0627\u06CC \u0637\u0648\u0644\u0627\u0646\u06CC \u0648 \u0646\u062D\u0648\u0647 \u06A9\u0648\u062A\u0627\u0647\u200C\u0633\u0627\u0632\u06CC \u0645\u062A\u0646 (max-line)."
      ]
    }
  ];
  var checklist_default = {
    headline,
    sections
  };

  // src/code.tsx
  var { widget } = figma;
  var { AutoLayout, Text, SVG, Image, Rectangle, useSyncedState, usePropertyMenu, useEffect, waitForTask } = widget;
  var EXTERNAL_CHECKLIST_URL = "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/checklist.json";
  function getUserInfo(username) {
    const userMap = {
      "Elham Tofighi": {
        name: "Elham Tofighi",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Elham.png"
      },
      "Ho Zi": {
        name: "Hossein Ziaei",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Hossein.png"
      },
      "Mahdi": {
        name: "Mahdi Deymi",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Mehdi.png"
      },
      "ashkan ashoori": {
        name: "Ashkan Ashoori",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Ashkan.png"
      },
      "Mim.Farahmand": {
        name: "Mostafa Farahmand",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Mostafa.png"
      },
      "Pooya": {
        name: "Pooya Kamel",
        avatarUrl: "https://raw.githubusercontent.com/sirpooya/dk-signoff-widget/refs/heads/main/src/avatars/Pooya.png"
      }
    };
    const normalizedUsername = username.trim();
    const matchedKey = Object.keys(userMap).find((key) => key.toLowerCase() === normalizedUsername.toLowerCase());
    if (matchedKey) {
      return userMap[matchedKey];
    }
    return null;
  }
  function isRTL(text) {
    const rtlRegex = /[\u0600-\u06FF\uFB50-\uFDFF\uFE70-\uFEFF]/;
    return rtlRegex.test(text);
  }
  var colors = {
    "content-1": "#1F1F1F",
    "content-2": "#5C5C5C",
    "content-3": "#A2A2A2",
    "link": "#1672DD",
    "border-1": "#ECEDEF",
    "gray": "#BFC0C1",
    "error": "#EB3850",
    "info": "#3F69F2",
    "success": "#3DAA58",
    "success-tonal": "#E8F5EB",
    "warning": "#F57F17",
    "warning-tonal": "#FEF0E3",
    "on-warning-tonal": "#934C0E",
    "on-error": "#FFFFFF",
    "on-gray": "#FFFFFF",
    "on-info": "#FFFFFF",
    "on-success": "#FFFFFF",
    "on-warning": "#FFFFFF"
  };
  var statusConfig = {
    "review": { label: "In-Review", color: colors.warning, textColor: colors["on-warning"] },
    "ready-for-dev": { label: "Ready for Dev", color: colors.success, textColor: colors["on-success"] },
    "live": { label: "Live", color: colors.info, textColor: colors["on-info"] },
    "live-app": { label: "Live - App", color: colors.info, textColor: colors["on-info"] },
    "live-web": { label: "Live - Web", color: colors.info, textColor: colors["on-info"] },
    "archived": { label: "Archived", color: colors.error, textColor: colors["on-error"] }
  };
  var archivedSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M13.963 2.804c1.040 0 1.952 0.7 2.222 1.706 0.006 0.022 0.011 0.045 0.015 0.067l0.298 1.461h3.36c0.615 0 1.115 0.5 1.115 1.115s-0.5 1.115-1.115 1.115h-0.748v8.889c0 0.027-0.001 0.055-0.003 0.082-0.163 2.229-2.019 3.956-4.256 3.956h-5.699c-2.236 0-4.094-1.727-4.257-3.958-0.002-0.027-0.002-0.054-0.002-0.080l-0.002-8.889h-0.75c-0.615 0-1.115-0.5-1.115-1.115s0.5-1.115 1.115-1.115h3.365l0.293-1.46 0.017-0.069c0.271-1.009 1.186-1.708 2.228-1.706h3.919zM7.121 17.103c0.091 1.053 0.972 1.865 2.031 1.865h5.699c1.060-0 1.941-0.812 2.031-1.865v-8.834h-9.76v8.834zM13.029 10.838c0.435-0.435 1.14-0.435 1.575 0s0.435 1.142 0 1.577l-1.030 1.028 1.030 1.030c0.435 0.435 0.435 1.14 0 1.575s-1.14 0.435-1.575 0l-1.030-1.030-1.028 1.030c-0.435 0.435-1.142 0.435-1.577 0s-0.434-1.14 0-1.575l1.028-1.030-1.028-1.028c-0.435-0.435-0.435-1.142 0-1.577s1.142-0.435 1.577 0l1.028 1.028 1.030-1.028zM10.041 5.034c-0.033 0-0.061 0.021-0.070 0.050l-0.191 0.954h4.443l-0.194-0.958c-0.010-0.027-0.035-0.047-0.065-0.047h-3.922z"></path>
</svg>`;
  var inReviewSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M11.529 4.967c3.551 0 6.429 2.879 6.429 6.43-0 1.379-0.436 2.655-1.175 3.701l1.743 1.739c0.502 0.502 0.503 1.316 0.002 1.818s-1.316 0.503-1.818 0.002l-1.798-1.795c-0.982 0.609-2.141 0.962-3.382 0.963-3.551-0-6.43-2.878-6.43-6.429s2.879-6.43 6.43-6.43zM11.529 7.538c-2.131 0-3.859 1.728-3.859 3.859s1.728 3.857 3.859 3.857c2.13-0 3.857-1.727 3.857-3.857s-1.726-3.858-3.857-3.859z"></path>
</svg>`;
  var liveAppSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M14.333 3.485c2.125 0 3.686 1.849 3.686 3.921v9.817c-0 2.071-1.562 3.921-3.686 3.921h-5.143c-2.125 0-3.686-1.85-3.686-3.921v-9.817c0-2.071 1.562-3.921 3.686-3.921h5.143zM9.19 5.715c-0.715 0-1.456 0.664-1.456 1.691v9.817c0 1.027 0.741 1.691 1.456 1.691h5.143c0.715 0 1.456-0.664 1.457-1.691v-9.817c0-1.027-0.741-1.691-1.457-1.691h-5.143zM13.345 14.921c0.615 0 1.115 0.5 1.115 1.115s-0.5 1.113-1.115 1.113h-2.69c-0.615-0-1.115-0.498-1.115-1.113s0.5-1.115 1.115-1.115h2.69z"></path>
</svg>`;
  var liveWebSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M11.999 3.592c4.644 0 8.409 3.764 8.409 8.407s-3.765 8.409-8.409 8.409c-4.643-0.001-8.407-3.766-8.407-8.409s3.764-8.407 8.407-8.407zM10.292 13.029c0.084 1.52 0.346 2.851 0.713 3.829 0.225 0.6 0.469 1.015 0.686 1.261 0.106 0.119 0.19 0.18 0.243 0.209 0.025 0.014 0.043 0.019 0.052 0.022 0.007 0.002 0.011 0.002 0.013 0.002s0.007 0 0.015-0.002c0.009-0.003 0.026-0.009 0.050-0.022 0.053-0.029 0.137-0.090 0.243-0.209 0.218-0.246 0.461-0.661 0.686-1.261 0.367-0.978 0.629-2.309 0.713-3.829h-3.415zM15.768 13.029c-0.086 1.73-0.385 3.314-0.849 4.55-0.010 0.025-0.022 0.050-0.032 0.075 1.764-0.902 3.050-2.602 3.38-4.626h-2.499zM5.733 13.029c0.33 2.022 1.615 3.721 3.377 4.624-0.009-0.025-0.021-0.049-0.030-0.074-0.464-1.236-0.761-2.82-0.847-4.55h-2.499zM9.11 6.342c-1.763 0.903-3.049 2.605-3.378 4.629h2.501c0.086-1.731 0.383-3.315 0.847-4.552 0.010-0.026 0.020-0.052 0.030-0.077zM11.986 5.651c-0.009 0.002-0.027 0.008-0.052 0.022-0.053 0.029-0.137 0.090-0.243 0.209-0.218 0.246-0.462 0.661-0.686 1.261-0.366 0.978-0.629 2.308-0.713 3.829h3.415c-0.084-1.52-0.347-2.851-0.713-3.829-0.225-0.6-0.469-1.015-0.686-1.261-0.106-0.12-0.19-0.18-0.243-0.209-0.025-0.013-0.041-0.019-0.050-0.022s-0.013-0.003-0.015-0.003c-0.002 0-0.006 0.001-0.013 0.003zM14.919 6.419c0.464 1.237 0.763 2.821 0.849 4.552h2.499c-0.33-2.025-1.616-3.726-3.38-4.629 0.010 0.026 0.022 0.051 0.032 0.077z"></path>
</svg>`;
  var liveSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M5.978 5.96c0.435-0.435 1.141-0.434 1.575 0.002s0.435 1.14 0 1.575c-1.142 1.141-1.846 2.715-1.847 4.455 0 1.746 0.71 3.325 1.86 4.467 0.436 0.434 0.438 1.139 0.005 1.575s-1.139 0.44-1.575 0.007c-1.554-1.543-2.519-3.684-2.52-6.049 0-2.355 0.958-4.49 2.501-6.032zM16.456 5.96c0.435-0.434 1.14-0.435 1.575 0 1.599 1.599 2.496 3.77 2.493 6.032l-0.012 0.44c-0.112 2.189-1.050 4.162-2.506 5.608-0.437 0.433-1.143 0.43-1.577-0.007s-0.43-1.142 0.007-1.575c1.149-1.141 1.86-2.72 1.86-4.467v-0.003c0.002-1.669-0.66-3.271-1.84-4.451-0.435-0.435-0.435-1.142 0-1.577zM12.001 9.027c1.674 0 3.030 1.358 3.030 3.032s-1.356 3.030-3.030 3.030c-1.674 0-3.032-1.356-3.032-3.030s1.358-3.032 3.032-3.032z"></path>
</svg>`;
  var readyForDevSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M13.001 6.506c0.195-0.583 0.824-0.899 1.408-0.705s0.899 0.824 0.705 1.408l-3.429 10.286c-0.195 0.584-0.824 0.899-1.408 0.705s-0.899-0.824-0.705-1.408l3.429-10.286zM4.451 7.212c0.384-0.48 1.087-0.558 1.567-0.174s0.558 1.086 0.174 1.567l-2.873 3.589 2.873 3.589c0.384 0.48 0.306 1.182-0.174 1.567s-1.183 0.306-1.567-0.174l-3.429-4.286c-0.325-0.407-0.325-0.986 0-1.393l3.429-4.286zM17.981 7.038c0.48-0.384 1.182-0.306 1.567 0.174l3.429 4.286c0.325 0.407 0.325 0.986 0 1.393l-3.429 4.286c-0.384 0.48-1.086 0.558-1.567 0.174s-0.558-1.086-0.174-1.567l2.871-3.589-2.871-3.589c-0.384-0.481-0.306-1.183 0.174-1.567z"></path>
</svg>`;
  var signoffSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M19.157 19.913c0.497 0 0.9 0.402 0.9 0.899s-0.403 0.9-0.9 0.9h-8.609c-0.497 0-0.9-0.404-0.9-0.9s0.403-0.899 0.9-0.899h8.609zM20.408 2.703c0.227-0.019 0.455 0.049 0.636 0.192 0.206 0.164 0.33 0.411 0.339 0.675 0.049 1.499-0.198 5.59-4.011 8.38-0.229 0.167-0.524 0.216-0.795 0.134l-2.213-0.676-0.186 2.256c-0.032 0.38-0.299 0.699-0.668 0.796-3.22 0.849-5.823 0.631-7.306 0.356-0.537 1.325-1.176 3.122-1.722 5.849-0.097 0.487-0.572 0.804-1.060 0.706s-0.803-0.571-0.706-1.059c0.678-3.392 1.505-5.44 2.114-6.886 3.057-7.248 10.861-9.804 15.478-10.709l0.098-0.014zM19.544 4.725c-4.223 0.99-9.868 3.259-12.576 8.394 1.229 0.182 3.14 0.272 5.47-0.25l0.226-2.72 0.014-0.101c0.046-0.231 0.181-0.437 0.378-0.57 0.225-0.153 0.507-0.195 0.768-0.116l2.834 0.865c2.136-1.741 2.741-3.999 2.888-5.502z"></path>
</svg>`;
  var wipSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M11.39 4.353c1.232-1.232 3.231-1.232 4.463 0l3.85 3.849c0.591 0.591 0.922 1.394 0.922 2.23s-0.331 1.642-0.922 2.233c-0.69 0.69-1.621 0.992-2.523 0.909l-0.38 3.049c-0.13 1.041-0.905 1.888-1.93 2.111l-8.441 1.835c-0.677 0.147-1.375-0.002-1.934-0.388-0.138-0.054-0.267-0.135-0.378-0.246s-0.193-0.241-0.248-0.378c-0.386-0.558-0.532-1.256-0.385-1.932l1.835-8.439c0.223-1.026 1.071-1.8 2.113-1.93l3.047-0.382c-0.082-0.901 0.221-1.83 0.911-2.52zM7.709 9.466c-0.104 0.013-0.189 0.091-0.211 0.193l-1.478 6.797 2.181-2.181c-0.008-0.067-0.012-0.135-0.012-0.204-0-0.991 0.803-1.795 1.793-1.796l0.177 0.010c0.353 0.035 0.688 0.172 0.963 0.397l0.131 0.119 0.12 0.132c0.262 0.32 0.406 0.723 0.405 1.14-0.002 0.99-0.804 1.791-1.795 1.791-0.070 0-0.138-0.006-0.206-0.013l-2.185 2.185 6.804-1.478c0.102-0.023 0.179-0.106 0.192-0.209l0.48-3.852-3.511-3.511-3.85 0.482zM14.276 5.93c-0.362-0.362-0.947-0.362-1.309 0s-0.363 0.947-0.002 1.309l3.851 3.85c0.362 0.361 0.949 0.36 1.311-0.002 0.173-0.174 0.271-0.409 0.271-0.655s-0.098-0.481-0.271-0.655l-3.85-3.849z"></path>
</svg>`;
  var refreshSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M21.009 13.101c0.057 0 0.113 0.006 0.169 0.017 0.080 0.016 0.156 0.043 0.227 0.078 0.007 0.004 0.015 0.007 0.023 0.011 0.209 0.112 0.369 0.304 0.438 0.535 0.025 0.085 0.038 0.172 0.038 0.26v4.002c-0 0.497-0.403 0.899-0.899 0.899s-0.9-0.403-0.9-0.899v-1.829l-2.318 2.318c-1.448 1.447-3.379 2.301-5.414 2.401l-0.408 0.010c-3.366-0-6.394-2.049-7.645-5.175l-0.157-0.393c-0.185-0.461 0.040-0.985 0.501-1.17s0.986 0.040 1.171 0.501l0.156 0.392 0.001 0.001c0.977 2.442 3.342 4.044 5.973 4.044 1.706 0 3.343-0.678 4.55-1.885l2.317-2.317h-1.828c-0.497 0-0.9-0.404-0.9-0.9s0.403-0.9 0.9-0.9h4.007zM12.037 3.097c3.366 0 6.394 2.050 7.644 5.176l0.156 0.392c0.184 0.461-0.040 0.986-0.501 1.171s-0.985-0.040-1.17-0.501l-0.157-0.393c-0.977-2.442-3.342-4.044-5.973-4.044-1.706-0-3.343 0.677-4.55 1.884l-2.318 2.318h1.829c0.497 0 0.899 0.403 0.899 0.9s-0.403 0.899-0.899 0.899h-4.002c-0.049 0-0.096-0.005-0.143-0.013-0.011-0.002-0.023-0.004-0.034-0.006-0.045-0.009-0.089-0.022-0.131-0.037-0.013-0.005-0.026-0.009-0.038-0.014-0.010-0.004-0.019-0.009-0.028-0.014-0.095-0.043-0.185-0.103-0.263-0.181-0.034-0.034-0.064-0.071-0.091-0.108-0.041-0.057-0.076-0.119-0.103-0.184-0.027-0.064-0.045-0.131-0.056-0.198-0.008-0.047-0.014-0.095-0.014-0.144v-4.002c0-0.497 0.403-0.9 0.9-0.9s0.9 0.403 0.9 0.9v1.828l2.317-2.317c1.544-1.544 3.639-2.412 5.823-2.412z"></path>
</svg>`;
  var defaultAvatarSvg = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="16" height="16" rx="8" fill="#ECEDEF"/>
<ellipse cx="8" cy="11.5" rx="5" ry="3" fill="white"/>
<circle cx="8" cy="5" r="2.5" fill="white"/>
</svg>`;
  var featherMiniSvg = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path d="M19.158 20.296c0.283 0.001 0.514 0.232 0.514 0.516s-0.231 0.513-0.514 0.514h-8.61c-0.284 0-0.514-0.23-0.514-0.514s0.23-0.516 0.514-0.516h8.61zM20.496 3.085c0.111 0.003 0.22 0.042 0.308 0.112 0.117 0.094 0.189 0.235 0.194 0.385 0.048 1.451-0.195 5.378-3.854 8.056-0.13 0.095-0.299 0.124-0.454 0.077l-2.672-0.815-0.224 2.732c-0.018 0.217-0.172 0.398-0.382 0.454-3.391 0.893-6.076 0.578-7.441 0.288-0.565 1.366-1.273 3.248-1.867 6.214-0.056 0.278-0.326 0.459-0.604 0.404s-0.459-0.326-0.403-0.604c0.671-3.357 1.487-5.38 2.091-6.812 2.976-7.055 10.598-9.579 15.198-10.48l0.11-0.010zM19.967 4.233c-4.416 0.957-10.787 3.335-13.577 9.174 1.253 0.242 3.539 0.461 6.41-0.233l0.248-2.995 0.022-0.114c0.035-0.109 0.106-0.204 0.203-0.27 0.129-0.087 0.29-0.112 0.439-0.067l3.027 0.924c2.651-2.058 3.167-4.866 3.229-6.42z"></path>
</svg>`;
  function getStatusIconSrc(status, color) {
    const svgMap = {
      "review": inReviewSvg,
      "ready-for-dev": readyForDevSvg,
      "live": liveSvg,
      "live-app": liveAppSvg,
      "live-web": liveWebSvg,
      "archived": archivedSvg
    };
    const svg = svgMap[status];
    return svg.replace(/width="24" height="24"/, 'width="14" height="14"').replace(/<path d="/, `<path fill="${color}" d="`);
  }
  var getSignoffIconSrc = (color) => {
    return signoffSvg.replace(/<path d="/, `<path fill="${color}" d="`);
  };
  var getWipIconSrc = (color) => {
    return wipSvg.replace(/<path d="/, `<path fill="${color}" d="`);
  };
  var getRefreshIconSrc = (color) => {
    return refreshSvg.replace(/<path d="/, `<path fill="${color}" d="`);
  };
  var getFeatherMiniIconSrc = (color) => {
    return featherMiniSvg.replace(/width="24" height="24"/, 'width="12" height="12"').replace(/<path d="/, `<path fill="${color}" d="`);
  };
  var monthNames = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sept",
    "Oct",
    "Nov",
    "Dec"
  ];
  function formatDateTime(date, options) {
    const { includeYear = true, separator = " - ", padDay = true } = options || {};
    const year = date.getFullYear();
    const month = monthNames[date.getMonth()];
    const day = padDay ? String(date.getDate()).padStart(2, "0") : date.getDate();
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    if (includeYear) {
      return `${year} ${month} ${day}${separator}${hours}:${minutes}`;
    }
    return `${month} ${day}${separator}${hours}:${minutes}`;
  }
  function getCurrentDateTime() {
    return formatDateTime(new Date());
  }
  function cleanUrlForDisplay(url) {
    if (!url)
      return "";
    return url.replace(/^http:\/\/(www\.)?/i, "");
  }
  function DateRow({ label, date, onRefresh, hasBorderBottom, photoUrl, userName, showRefreshButton = true, isSignedOff = false, onSignOff }) {
    const isSignoffRow = photoUrl !== void 0 && userName !== void 0;
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: isSignoffRow ? "signoff-row" : "revision-row",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 12,
      padding: 16,
      width: "fill-parent",
      stroke: hasBorderBottom ? {
        type: "solid",
        color: colors["border-1"]
      } : void 0,
      strokeWidth: hasBorderBottom ? 1 : void 0
    }, /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "time-wrapper",
      direction: "vertical",
      verticalAlignItems: "start",
      spacing: 6,
      width: "fill-parent"
    }, /* @__PURE__ */ figma.widget.h(Text, {
      name: "label",
      fontSize: 14,
      fill: colors["content-1"],
      fontWeight: "medium",
      width: "fill-parent"
    }, label), isSignoffRow ? /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "subtitle-wrapper",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 6,
      padding: { top: 0, bottom: 0, left: 0, right: 0 },
      width: "fill-parent"
    }, photoUrl ? /* @__PURE__ */ figma.widget.h(Image, {
      name: "avatar",
      cornerRadius: 12,
      width: 16,
      height: 16,
      src: String(photoUrl)
    }) : /* @__PURE__ */ figma.widget.h(SVG, {
      name: "avatar",
      src: defaultAvatarSvg,
      width: 16,
      height: 16
    }), /* @__PURE__ */ figma.widget.h(Text, {
      name: "name",
      fontSize: 14,
      fontWeight: "normal",
      fill: colors["content-2"]
    }, userName), isSignedOff && /* @__PURE__ */ figma.widget.h(figma.widget.Fragment, null, /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal"
    }, "\u2013"), /* @__PURE__ */ figma.widget.h(Text, {
      name: "timestamp",
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal"
    }, date))) : /* @__PURE__ */ figma.widget.h(Text, {
      name: "timestamp",
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal",
      width: "fill-parent"
    }, date)), isSignoffRow && !isSignedOff && onSignOff && /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "signoff-button",
      direction: "horizontal",
      verticalAlignItems: "center",
      horizontalAlignItems: "center",
      spacing: 6,
      padding: 0,
      onClick: onSignOff,
      hoverStyle: { opacity: 0.8 }
    }, /* @__PURE__ */ figma.widget.h(SVG, {
      src: getSignoffIconSrc(colors.link),
      width: 24,
      height: 24
    }), /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: colors.link,
      fontWeight: "semi-bold",
      fontFamily: "Inter"
    }, "Sign Off")), showRefreshButton && /* @__PURE__ */ figma.widget.h(SVG, {
      name: "refresh-button",
      src: getRefreshIconSrc(colors.link),
      onClick: onRefresh
    }));
  }
  function ApprovalRow({ role, approved, assignee, photoUrl, timestamp, onToggle, hasBorderBottom }) {
    const config = approved ? { label: "Approved", color: colors.success, textColor: colors["on-success"] } : { label: "In-Review", color: colors["warning-tonal"], textColor: colors["on-warning-tonal"] };
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "approval-row",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 12,
      padding: 16,
      width: "fill-parent",
      stroke: hasBorderBottom ? {
        type: "solid",
        color: colors["border-1"]
      } : void 0,
      strokeWidth: hasBorderBottom ? 1 : void 0,
      strokeAlign: "center"
    }, /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "approval-wrapper",
      direction: "vertical",
      verticalAlignItems: "start",
      spacing: 6,
      width: "fill-parent"
    }, /* @__PURE__ */ figma.widget.h(Text, {
      name: "role",
      fontSize: 14,
      fill: colors["content-1"],
      fontWeight: "medium",
      width: "fill-parent"
    }, role), /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "assignee-wrapper",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 6,
      padding: 0,
      width: "fill-parent"
    }, photoUrl ? /* @__PURE__ */ figma.widget.h(Image, {
      name: "avatar",
      cornerRadius: 12,
      width: 16,
      height: 16,
      src: photoUrl
    }) : /* @__PURE__ */ figma.widget.h(SVG, {
      name: "avatar",
      src: defaultAvatarSvg,
      width: 16,
      height: 16
    }), /* @__PURE__ */ figma.widget.h(Text, {
      name: "assignee",
      fontSize: 14,
      fill: colors["content-2"],
      fontWeight: "normal"
    }, assignee || "Assignee"), approved && timestamp && /* @__PURE__ */ figma.widget.h(figma.widget.Fragment, null, /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal"
    }, "\u2013"), /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal"
    }, timestamp)))), /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "status-badge",
      direction: "horizontal",
      verticalAlignItems: "center",
      horizontalAlignItems: "center",
      padding: { left: 12, right: 12, top: 6, bottom: 6 },
      fill: config.color,
      cornerRadius: 8,
      spacing: 6,
      onClick: onToggle,
      hoverStyle: { opacity: 0.8 }
    }, /* @__PURE__ */ figma.widget.h(Text, {
      fontFamily: "Inter",
      fontSize: 12,
      fill: config.textColor,
      fontWeight: "medium",
      letterSpacing: 2
    }, config.label.toUpperCase())));
  }
  function LinkRow({ link, onLinkClick, onEdit, hasBorderBottom }) {
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "link-row",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 12,
      padding: 16,
      width: "fill-parent",
      stroke: hasBorderBottom ? {
        type: "solid",
        color: colors["border-1"]
      } : void 0,
      strokeWidth: hasBorderBottom ? 1 : void 0,
      strokeAlign: "center",
      onClick: onEdit,
      hoverStyle: { opacity: 0.8 }
    }, /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "link-wrapper",
      direction: "vertical",
      verticalAlignItems: "start",
      spacing: 6,
      width: "fill-parent"
    }, /* @__PURE__ */ figma.widget.h(Text, {
      name: "label",
      fontSize: 14,
      fill: colors["content-1"],
      fontWeight: "medium",
      width: "fill-parent"
    }, "Links"), link ? /* @__PURE__ */ figma.widget.h(Text, {
      name: "link",
      fontSize: 14,
      fill: colors.link,
      fontWeight: "normal",
      width: "fill-parent",
      truncate: 1,
      href: link
    }, cleanUrlForDisplay(link)) : /* @__PURE__ */ figma.widget.h(Text, {
      name: "link-placeholder",
      fontSize: 14,
      fill: colors["content-3"],
      fontWeight: "normal",
      width: "fill-parent"
    }, "Click to add link")));
  }
  function CheckboxItem({ label, checked, onToggle, direction = "rtl" }) {
    const isRTLDirection = direction === "rtl";
    const textAlign = isRTLDirection ? "right" : "left";
    const fontFamily = isRTLDirection ? "Vazirmatn" : "Inter";
    const checkboxElement = /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "checkbox",
      width: 24,
      height: 24,
      verticalAlignItems: "center",
      horizontalAlignItems: "center",
      fill: checked ? colors.success : "#FFFFFF",
      cornerRadius: 96,
      stroke: {
        type: "solid",
        color: checked ? colors.success : colors["border-1"]
      },
      strokeWidth: 2
    }, checked && /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: colors["on-success"]
    }, "\u2713"));
    const textElement = /* @__PURE__ */ figma.widget.h(Text, {
      fontSize: 14,
      fill: "#000000",
      fontFamily,
      horizontalAlignText: textAlign,
      width: "fill-parent",
      textDecoration: checked ? "strikethrough" : "none"
    }, label);
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "checkbox-row",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 8,
      padding: { top: 6, bottom: 6, left: 0, right: 0 },
      width: "fill-parent",
      fill: checked ? colors["success-tonal"] : void 0,
      onClick: onToggle,
      hoverStyle: { opacity: 0.8 }
    }, isRTLDirection ? /* @__PURE__ */ figma.widget.h(figma.widget.Fragment, null, textElement, checkboxElement) : /* @__PURE__ */ figma.widget.h(figma.widget.Fragment, null, checkboxElement, textElement));
  }
  function TitleSection({ status, photoUrl, userName, designerSignedOff }) {
    const config = designerSignedOff ? statusConfig[status] : { label: "In-Progress", color: colors.gray, textColor: colors["on-gray"] };
    const iconSrc = designerSignedOff ? getStatusIconSrc(status, config.textColor) : getWipIconSrc(config.textColor).replace(/width="24" height="24"/, 'width="14" height="14"');
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "header-section",
      direction: "horizontal",
      verticalAlignItems: "center",
      horizontalAlignItems: "start",
      spacing: 12,
      padding: { top: 0, bottom: 0, left: 0, right: 0 },
      width: "fill-parent"
    }, /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "title-wrapper",
      direction: "vertical",
      verticalAlignItems: "start",
      spacing: 8,
      padding: { top: 0, bottom: 0, left: 0, right: 0 },
      width: "fill-parent"
    }, /* @__PURE__ */ figma.widget.h(Text, {
      name: "title",
      fontSize: 20,
      fill: colors["content-1"],
      fontWeight: "bold",
      width: "fill-parent"
    }, "Design Status")), /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "status-badge",
      direction: "horizontal",
      verticalAlignItems: "center",
      horizontalAlignItems: "center",
      padding: { left: 12, right: 12, top: 6, bottom: 6 },
      fill: config.color,
      cornerRadius: 96,
      spacing: 6
    }, /* @__PURE__ */ figma.widget.h(SVG, {
      src: iconSrc,
      width: 14,
      height: 14
    }), /* @__PURE__ */ figma.widget.h(Text, {
      fontFamily: "Inter",
      fontSize: 12,
      fill: config.textColor,
      fontWeight: "medium",
      letterSpacing: 2
    }, config.label.toUpperCase())));
  }
  function CheckboxWidget() {
    const [status, setStatus] = useSyncedState("status", "review");
    const [finalizationDate, setFinalizationDate] = useSyncedState("finalizationDate", getCurrentDateTime());
    const [lastRevision, setLastRevision] = useSyncedState("lastRevision", getCurrentDateTime());
    const [designerSignedOff, setDesignerSignedOff] = useSyncedState("designerSignedOff", false);
    const [pmApproved, setPmApproved] = useSyncedState("pmApproved", false);
    const [pmAssignee, setPmAssignee] = useSyncedState("pmAssignee", null);
    const [pmPhotoUrl, setPmPhotoUrl] = useSyncedState("pmPhotoUrl", null);
    const [pmTimestamp, setPmTimestamp] = useSyncedState("pmTimestamp", null);
    const [designLeadApproved, setDesignLeadApproved] = useSyncedState("designLeadApproved", false);
    const [designLeadAssignee, setDesignLeadAssignee] = useSyncedState("designLeadAssignee", null);
    const [designLeadPhotoUrl, setDesignLeadPhotoUrl] = useSyncedState("designLeadPhotoUrl", null);
    const [designLeadTimestamp, setDesignLeadTimestamp] = useSyncedState("designLeadTimestamp", null);
    const [dsmApproved, setDsmApproved] = useSyncedState("dsmApproved", false);
    const [dsmAssignee, setDsmAssignee] = useSyncedState("dsmAssignee", null);
    const [dsmPhotoUrl, setDsmPhotoUrl] = useSyncedState("dsmPhotoUrl", null);
    const [dsmTimestamp, setDsmTimestamp] = useSyncedState("dsmTimestamp", null);
    const [showChecklist, setShowChecklist] = useSyncedState("showChecklist", true);
    const [showLinkSection, setShowLinkSection] = useSyncedState("showLinkSection", false);
    const [linkUrl, setLinkUrl] = useSyncedState("linkUrl", "");
    const [currentUserName, setCurrentUserName] = useSyncedState("currentUserName", "");
    const [currentUserPhotoUrl, setCurrentUserPhotoUrl] = useSyncedState("currentUserPhotoUrl", null);
    const [checklistData, setChecklistData] = useSyncedState("checklistData", null);
    const [hasFetchedExternal, setHasFetchedExternal] = useSyncedState("hasFetchedExternal", false);
    const [checklistItems, setChecklistItems] = useSyncedState("checklistItems", {});
    useEffect(() => {
      if (hasFetchedExternal) {
        return;
      }
      setHasFetchedExternal(true);
      console.log("[CHECKLIST] Fetching:", EXTERNAL_CHECKLIST_URL);
      let fetchPromise;
      try {
        fetchPromise = fetch(EXTERNAL_CHECKLIST_URL);
      } catch (err) {
        console.error("[CHECKLIST] \u274C Fetch error:", err);
        fetchPromise = Promise.reject(err);
      }
      fetchPromise = fetchPromise.catch((err) => {
        throw err;
      });
      const timeoutPromise = new Promise((_, reject) => {
        setTimeout(() => {
          reject(new Error("Fetch timeout after 5 seconds"));
        }, 5e3);
      });
      let handled = false;
      const fallbackTimeoutId = setTimeout(() => {
        if (!handled && !checklistData) {
          console.error("[CHECKLIST] \u23F0 Timeout - using fallback");
          handled = true;
          const fallbackData = checklist_default || checklist_exports;
          const data = fallbackData.default || fallbackData;
          if (data && data.sections) {
            setChecklistData(data);
            const newItems = data.sections.reduce((acc, section, sectionIndex) => {
              section.items.forEach((_, itemIndex) => {
                const key = `${sectionIndex}-${itemIndex}`;
                acc[key] = false;
              });
              return acc;
            }, {});
            setChecklistItems(newItems);
          }
        }
      }, 6e3);
      waitForTask(Promise.race([fetchPromise, timeoutPromise]).then((response) => {
        if (handled) {
          return;
        }
        clearTimeout(fallbackTimeoutId);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      }).then((data) => {
        return data;
      }).then((data) => {
        if (data && data.headline && data.sections && Array.isArray(data.sections)) {
          console.log("[CHECKLIST] \u2705 Success (status: 200)");
          setChecklistData(data);
          const newItems = data.sections.reduce((acc, section, sectionIndex) => {
            section.items.forEach((_, itemIndex) => {
              const key = `${sectionIndex}-${itemIndex}`;
              acc[key] = false;
            });
            return acc;
          }, {});
          setChecklistItems(newItems);
          figma.notify("Checklist is up to date", { timeout: 2e3 });
          handled = true;
        } else {
          throw new Error("Invalid checklist structure");
        }
      }).catch((error) => {
        var _a, _b;
        if (handled) {
          return;
        }
        handled = true;
        clearTimeout(fallbackTimeoutId);
        console.error("[CHECKLIST] \u274C Error:", error == null ? void 0 : error.name, "-", error == null ? void 0 : error.message);
        if ((error == null ? void 0 : error.name) === "TypeError" && ((_a = error == null ? void 0 : error.message) == null ? void 0 : _a.includes("Failed to fetch"))) {
          figma.notify("Using fallback checklist (Network blocked).", { timeout: 3e3 });
        } else if ((_b = error == null ? void 0 : error.message) == null ? void 0 : _b.includes("timeout")) {
          figma.notify("Using fallback checklist (Request timeout).", { timeout: 3e3 });
        } else {
          figma.notify("Using fallback checklist (Fetch failed).", { timeout: 3e3 });
        }
        console.log("[CHECKLIST] Using fallback checklist");
        const fallbackData = checklist_exports;
        const data = fallbackData.default || fallbackData;
        if (data && data.sections) {
          setChecklistData(data);
          const newItems = data.sections.reduce((acc, section, sectionIndex) => {
            section.items.forEach((_, itemIndex) => {
              const key = `${sectionIndex}-${itemIndex}`;
              acc[key] = false;
            });
            return acc;
          }, {});
          setChecklistItems(newItems);
        } else {
          figma.notify("Failed to load checklist", { timeout: 3e3, error: true });
        }
      }).catch((err) => {
        console.error("[CHECKLIST] Outer catch:", err);
        if (!checklistData) {
          const fallbackData = checklist_default || checklist_exports;
          const data = fallbackData.default || fallbackData;
          if (data && data.sections) {
            setChecklistData(data);
            const newItems = data.sections.reduce((acc, section, sectionIndex) => {
              section.items.forEach((_, itemIndex) => {
                const key = `${sectionIndex}-${itemIndex}`;
                acc[key] = false;
              });
              return acc;
            }, {});
            setChecklistItems(newItems);
          }
        }
      }));
    }, [hasFetchedExternal]);
    useEffect(() => {
      if (!currentUserName) {
        if (figma.currentUser) {
          const userInfo = getUserInfo(figma.currentUser.name);
          if (userInfo) {
            setCurrentUserName(userInfo.name);
            setCurrentUserPhotoUrl(userInfo.avatarUrl);
          } else {
            setCurrentUserName(figma.currentUser.name);
            setCurrentUserPhotoUrl(figma.currentUser.photoUrl);
          }
        } else {
          figma.notify("Please login to Figma", { timeout: 3e3 });
        }
      }
    });
    const formatUrl = (url) => {
      if (!url)
        return "";
      const trimmed = url.trim();
      if (!trimmed)
        return "";
      if (!trimmed.match(/^https?:\/\//i)) {
        return `https://${trimmed}`;
      }
      return trimmed;
    };
    const getUrlForModal = (url) => {
      if (!url)
        return "";
      if (!url.match(/^https?:\/\//i)) {
        return `https://${url}`;
      }
      return url;
    };
    const showLinkEditDialog = () => {
      return new Promise((resolve) => {
        figma.ui.onmessage = (msg) => {
          if (msg.type === "save-link") {
            const formattedUrl = formatUrl(msg.url || "");
            setLinkUrl(formattedUrl);
            figma.ui.close();
            resolve();
          } else if (msg.type === "cancel-link") {
            figma.ui.close();
            resolve();
          }
        };
        const urlForModal = getUrlForModal(linkUrl || "");
        const escapedUrl = urlForModal.replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        figma.showUI(`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <style>
            body {
              margin: 0;
              padding: 16px;
              font-family: Inter, -apple-system, BlinkMacSystemFont, sans-serif;
              background: #FFFFFF;
            }
            label {
              display: block;
              margin-bottom: 8px;
              font-size: 12px;
              color: #1F1F1F;
              font-weight: 500;
            }
            input {
              width: 100%;
              padding: 8px;
              font-size: 14px;
              border: 1px solid #ECEDEF;
              border-radius: 4px;
              box-sizing: border-box;
              font-family: inherit;
            }
            input:focus {
              outline: none;
              border-color: #1672DD;
            }
            .button-group {
              margin-top: 12px;
              display: flex;
              gap: 8px;
              justify-content: flex-end;
            }
            button {
              padding: 8px 16px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              font-size: 14px;
              font-family: inherit;
              font-weight: 500;
            }
            #cancel-link {
              background: #ECEDEF;
              color: #1F1F1F;
            }
            #cancel-link:hover {
              background: #E0E0E0;
            }
            #save-link {
              background: #1672DD;
              color: white;
            }
            #save-link:hover {
              background: #0D5BB8;
            }
          </style>
        </head>
        <body>
          <label for="link-input">Enter URL:</label>
          <input 
            id="link-input" 
            type="text" 
            placeholder="https://example.com" 
            value="${escapedUrl}" 
            autocomplete="off"
          />
          <div class="button-group">
            <button id="cancel-link">Cancel</button>
            <button id="save-link">Save</button>
          </div>
          <script>
            (function() {
              const input = document.getElementById('link-input');
              const saveBtn = document.getElementById('save-link');
              const cancelBtn = document.getElementById('cancel-link');
              
              function sendMessage(type, url) {
                window.parent.postMessage({ pluginMessage: { type: type, url: url } }, '*');
              }
              
              function saveLink() {
                const url = input.value.trim();
                sendMessage('save-link', url);
              }
              
              function cancelLink() {
                sendMessage('cancel-link', null);
              }
              
              saveBtn.addEventListener('click', saveLink);
              cancelBtn.addEventListener('click', cancelLink);
              
              input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                  e.preventDefault();
                  saveLink();
                } else if (e.key === 'Escape') {
                  e.preventDefault();
                  cancelLink();
                }
              });
              
              // Focus and select on load
              setTimeout(function() {
                input.focus();
                input.select();
              }, 10);
            })();
          <\/script>
        </body>
        </html>
      `, { width: 320, height: 140, themeColors: true });
      });
    };
    useEffect(() => {
      if (pmApproved && !pmAssignee) {
        if (figma.currentUser) {
          const userInfo = getUserInfo(figma.currentUser.name);
          if (userInfo) {
            setPmAssignee(userInfo.name);
            setPmPhotoUrl(userInfo.avatarUrl);
          } else {
            setPmAssignee(figma.currentUser.name);
            setPmPhotoUrl(figma.currentUser.photoUrl);
          }
        }
      }
    });
    useEffect(() => {
      if (designLeadApproved && !designLeadAssignee) {
        if (figma.currentUser) {
          const userInfo = getUserInfo(figma.currentUser.name);
          if (userInfo) {
            setDesignLeadAssignee(userInfo.name);
            setDesignLeadPhotoUrl(userInfo.avatarUrl);
          } else {
            setDesignLeadAssignee(figma.currentUser.name);
            setDesignLeadPhotoUrl(figma.currentUser.photoUrl);
          }
        }
      }
    });
    useEffect(() => {
      if (dsmApproved && !dsmAssignee) {
        if (figma.currentUser) {
          const userInfo = getUserInfo(figma.currentUser.name);
          if (userInfo) {
            setDsmAssignee(userInfo.name);
            setDsmPhotoUrl(userInfo.avatarUrl);
          } else {
            setDsmAssignee(figma.currentUser.name);
            setDsmPhotoUrl(figma.currentUser.photoUrl);
          }
        }
      }
    });
    usePropertyMenu([
      ...designerSignedOff ? [] : [
        {
          itemType: "action",
          tooltip: "Sign Off",
          propertyName: "signOff",
          icon: `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
<path fill="white" d="M19.157 19.913c0.497 0 0.9 0.402 0.9 0.899s-0.403 0.9-0.9 0.9h-8.609c-0.497 0-0.9-0.404-0.9-0.9s0.403-0.899 0.9-0.899h8.609zM20.408 2.703c0.227-0.019 0.455 0.049 0.636 0.192 0.206 0.164 0.33 0.411 0.339 0.675 0.049 1.499-0.198 5.59-4.011 8.38-0.229 0.167-0.524 0.216-0.795 0.134l-2.213-0.676-0.186 2.256c-0.032 0.38-0.299 0.699-0.668 0.796-3.22 0.849-5.823 0.631-7.306 0.356-0.537 1.325-1.176 3.122-1.722 5.849-0.097 0.487-0.572 0.804-1.060 0.706s-0.803-0.571-0.706-1.059c0.678-3.392 1.505-5.44 2.114-6.886 3.057-7.248 10.861-9.804 15.478-10.709l0.098-0.014zM19.544 4.725c-4.223 0.99-9.868 3.259-12.576 8.394 1.229 0.182 3.14 0.272 5.47-0.25l0.226-2.72 0.014-0.101c0.046-0.231 0.181-0.437 0.378-0.57 0.225-0.153 0.507-0.195 0.768-0.116l2.834 0.865c2.136-1.741 2.741-3.999 2.888-5.502z"></path>
</svg>`
        }
      ],
      ...designerSignedOff ? [
        {
          itemType: "dropdown",
          options: [
            { option: "review", label: "\u{1F7E0} In-Review" },
            { option: "ready-for-dev", label: "\u{1F7E2} Ready for Dev" },
            { option: "live", label: "\u{1F535} Live" },
            { option: "live-app", label: "\u{1F535} Live - App" },
            { option: "live-web", label: "\u{1F535} Live - Web" },
            { option: "archived", label: "\u{1F534} Archived" }
          ],
          selectedOption: status,
          tooltip: "Status",
          propertyName: "status"
        }
      ] : [],
      {
        itemType: "action",
        tooltip: showLinkSection ? "Hide Link" : "Add Link",
        propertyName: "addLink",
        icon: `<svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path fill="white" d="M6.99121 9.50793C7.28411 9.21507 7.75985 9.21505 8.05273 9.50793C8.34526 9.80076 8.34526 10.2757 8.05273 10.5685L5.86035 12.7609C4.41317 14.252 4.43023 16.6296 5.90039 18.0997C7.37284 19.572 9.75547 19.5869 11.2461 18.1329L13.4316 15.9474C13.7246 15.6548 14.1994 15.6546 14.4922 15.9474C14.7849 16.2402 14.7848 16.715 14.4922 17.0079L12.293 19.2072C10.2145 21.234 6.89277 21.213 4.83984 19.1603C2.78678 17.1072 2.76565 13.7847 4.79297 11.7062L6.99121 9.50793ZM14.1377 8.80188C14.4305 8.50903 14.9053 8.50913 15.1982 8.80188C15.491 9.09478 15.4911 9.56958 15.1982 9.86243L9.8623 15.1984C9.56945 15.4911 9.09463 15.4911 8.80176 15.1984C8.50904 14.9055 8.509 14.4307 8.80176 14.1378L14.1377 8.80188ZM11.7061 4.79309C13.7846 2.76584 17.1071 2.78693 19.1602 4.83997C21.2129 6.89287 21.2338 10.2146 19.207 12.2931L17.0078 14.4923C16.7149 14.7849 16.2401 14.7851 15.9473 14.4923C15.6545 14.1995 15.6546 13.7247 15.9473 13.4318L18.1328 11.2462C19.5867 9.75558 19.5719 7.37294 18.0996 5.90051C16.6272 4.4281 14.2446 4.4134 12.7539 5.86731L10.5684 8.05286C10.2755 8.34542 9.80064 8.34542 9.50781 8.05286C9.21493 7.75996 9.21492 7.28422 9.50781 6.99133L11.7061 4.79309Z"/>
</svg>`
      }
    ], ({ propertyName, propertyValue }) => {
      if (propertyName === "signOff") {
        setDesignerSignedOff(true);
        setFinalizationDate(getCurrentDateTime());
      }
      if (propertyName === "status" && propertyValue) {
        const newStatus = propertyValue;
        setStatus(newStatus);
        if (newStatus === "review") {
          setShowChecklist(true);
        }
      }
      if (propertyName === "addLink") {
        setShowLinkSection(!showLinkSection);
      }
    });
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "Widget Root",
      direction: "vertical",
      verticalAlignItems: "start",
      padding: 24,
      fill: "#FFFFFF",
      cornerRadius: 0,
      spacing: 24,
      width: 400
    }, /* @__PURE__ */ figma.widget.h(TitleSection, {
      status,
      photoUrl: currentUserPhotoUrl,
      userName: currentUserName,
      designerSignedOff
    }), /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "timestamp-section",
      direction: "vertical",
      verticalAlignItems: "start",
      horizontalAlignItems: "start",
      spacing: 0,
      padding: 0,
      width: "fill-parent",
      stroke: {
        type: "solid",
        color: colors["border-1"]
      },
      strokeWidth: 1,
      cornerRadius: 12
    }, /* @__PURE__ */ figma.widget.h(DateRow, {
      label: "Designer",
      date: finalizationDate,
      onRefresh: () => setFinalizationDate(getCurrentDateTime()),
      hasBorderBottom: true,
      photoUrl: currentUserPhotoUrl,
      userName: currentUserName,
      showRefreshButton: false,
      isSignedOff: designerSignedOff,
      onSignOff: () => {
        setDesignerSignedOff(true);
        setFinalizationDate(getCurrentDateTime());
      }
    }), false), designerSignedOff && /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "approvals-section",
      direction: "vertical",
      verticalAlignItems: "start",
      horizontalAlignItems: "start",
      spacing: 0,
      padding: 0,
      width: "fill-parent",
      stroke: {
        type: "solid",
        color: colors["border-1"]
      },
      strokeWidth: 1,
      cornerRadius: 12
    }, /* @__PURE__ */ figma.widget.h(ApprovalRow, {
      role: "PM",
      approved: pmApproved,
      assignee: pmAssignee,
      photoUrl: pmPhotoUrl,
      onToggle: () => {
        if (pmApproved) {
          setPmApproved(false);
          setPmAssignee(null);
          setPmPhotoUrl(null);
          setPmTimestamp(null);
        } else {
          setPmApproved(true);
          setPmTimestamp(formatDateTime(new Date(), { includeYear: false, separator: ", ", padDay: false }));
        }
      },
      timestamp: pmTimestamp,
      hasBorderBottom: true
    }), /* @__PURE__ */ figma.widget.h(ApprovalRow, {
      role: "Design Lead",
      approved: designLeadApproved,
      assignee: designLeadAssignee,
      photoUrl: designLeadPhotoUrl,
      onToggle: () => {
        if (designLeadApproved) {
          setDesignLeadApproved(false);
          setDesignLeadAssignee(null);
          setDesignLeadPhotoUrl(null);
          setDesignLeadTimestamp(null);
        } else {
          setDesignLeadApproved(true);
          setDesignLeadTimestamp(formatDateTime(new Date(), { includeYear: false, separator: ", ", padDay: false }));
        }
      },
      timestamp: designLeadTimestamp,
      hasBorderBottom: true
    }), /* @__PURE__ */ figma.widget.h(ApprovalRow, {
      role: "DSM",
      approved: dsmApproved,
      assignee: dsmAssignee,
      photoUrl: dsmPhotoUrl,
      onToggle: () => {
        if (dsmApproved) {
          setDsmApproved(false);
          setDsmAssignee(null);
          setDsmPhotoUrl(null);
          setDsmTimestamp(null);
        } else {
          if (figma.currentUser && figma.currentUser.id === "1037663391016075886") {
            setDsmApproved(true);
            setDsmTimestamp(formatDateTime(new Date(), { includeYear: false, separator: ", ", padDay: false }));
          } else {
            figma.notify("Only DSM can do this.", { timeout: 3e3 });
          }
        }
      },
      timestamp: dsmTimestamp,
      hasBorderBottom: false
    })), showLinkSection && /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "link-section",
      direction: "vertical",
      verticalAlignItems: "start",
      horizontalAlignItems: "start",
      spacing: 0,
      padding: 0,
      width: "fill-parent",
      stroke: {
        type: "solid",
        color: colors["border-1"]
      },
      strokeWidth: 1,
      cornerRadius: 12
    }, /* @__PURE__ */ figma.widget.h(LinkRow, {
      link: linkUrl,
      onLinkClick: () => {
        if (linkUrl) {
          figma.openExternal(linkUrl);
        }
      },
      onEdit: () => {
        waitForTask(showLinkEditDialog());
      },
      hasBorderBottom: false
    })), (() => {
      const shouldShowChecklist = showChecklist && status !== "ready-for-dev" && status !== "live" && status !== "live-app" && status !== "live-web" && status !== "archived" && checklistData !== null && checklistData !== void 0;
      if (!shouldShowChecklist) {
        return null;
      }
      const isRTLDirection = checklistData && checklistData.headline ? isRTL(checklistData.headline) : true;
      const textAlign = isRTLDirection ? "right" : "left";
      const horizontalAlign = isRTLDirection ? "end" : "start";
      const fontFamily = isRTLDirection ? "Vazirmatn" : "Inter";
      return /* @__PURE__ */ figma.widget.h(AutoLayout, {
        name: "checklist-section",
        direction: "vertical",
        verticalAlignItems: "start",
        horizontalAlignItems: horizontalAlign,
        spacing: 16,
        padding: 0,
        width: "fill-parent"
      }, /* @__PURE__ */ figma.widget.h(Text, {
        fontSize: 20,
        fill: colors["content-1"],
        fontWeight: "bold",
        fontFamily,
        horizontalAlignText: textAlign,
        width: "fill-parent"
      }, checklistData.headline), checklistData.sections.map((section, sectionIndex) => /* @__PURE__ */ figma.widget.h(AutoLayout, {
        key: sectionIndex,
        name: "checklist-group",
        direction: "vertical",
        verticalAlignItems: "start",
        horizontalAlignItems: horizontalAlign,
        spacing: 0,
        padding: 0,
        width: "fill-parent"
      }, /* @__PURE__ */ figma.widget.h(Text, {
        name: "section-title",
        fontSize: 14,
        fill: colors["content-1"],
        fontWeight: "bold",
        fontFamily,
        horizontalAlignText: textAlign,
        width: "fill-parent"
      }, section.title), section.items.map((label, itemIndex) => {
        const key = `${sectionIndex}-${itemIndex}`;
        return /* @__PURE__ */ figma.widget.h(CheckboxItem, {
          key,
          label,
          checked: checklistItems[key] || false,
          direction: isRTLDirection ? "rtl" : "ltr",
          onToggle: () => {
            setChecklistItems(__spreadProps(__spreadValues({}, checklistItems), {
              [key]: !checklistItems[key]
            }));
          }
        });
      }))));
    })(), /* @__PURE__ */ figma.widget.h(AutoLayout, {
      name: "copyright-wrapper",
      direction: "horizontal",
      verticalAlignItems: "center",
      spacing: 4,
      padding: 0,
      width: "fill-parent",
      onClick: () => {
        figma.openExternal("https://github.com/sirpooya/dk-signoff-widget");
      },
      hoverStyle: { opacity: 0.8 }
    }, /* @__PURE__ */ figma.widget.h(SVG, {
      src: getFeatherMiniIconSrc(colors["content-2"]),
      width: 12,
      height: 12
    }), /* @__PURE__ */ figma.widget.h(Text, {
      name: "copyright-notice",
      fontSize: 10,
      fill: colors["content-2"],
      fontWeight: "light",
      letterSpacing: 0.5,
      width: "fill-parent"
    }, "DesignSignOff Widget")));
  }
  widget.register(CheckboxWidget);
})();
